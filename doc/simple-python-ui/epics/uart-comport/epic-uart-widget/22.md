---
name: Wire up Signal/Slot connections between worker and UI
status: open
created: 2025-12-24T03:41:21Z
updated: 2025-12-24T03:41:21Z
github: https://github.com/junyoulin641/CCPM/issues/22
depends_on: [10, 13, 14, 15, 18, 19, 20]
parallel: false
conflicts_with: []
---

# Task: Wire up Signal/Slot connections between worker and UI

## Description
Connect all signals from the SerialWorker to UI slot handlers, and connect UI button clicks to worker methods. This establishes the event-driven communication between the worker thread (serial I/O) and the main UI thread (display and controls). Proper signal/slot wiring ensures thread-safe updates and responsive UI behavior.

## Acceptance Criteria
- [ ] Connect SerialWorker.portConnected → UI handler (update status, enable/disable buttons)
- [ ] Connect SerialWorker.portDisconnected → UI handler (update status, reset controls)
- [ ] Connect SerialWorker.dataReceived → UI display handler (append to text display)
- [ ] Connect SerialWorker.statusChanged → UI status label update
- [ ] Connect Connect button clicked → SerialWorker.connectPort()
- [ ] Connect Disconnect button clicked → SerialWorker.disconnectPort()
- [ ] Connect Send button clicked → SerialWorker.sendData()
- [ ] All connections established in UARTWidget.__init__() or setup method
- [ ] Thread safety verified (Qt handles cross-thread signals automatically)

## Technical Details
**Implementation approach:**
- In UARTWidget class, add signal/slot connection code:
  ```python
  # Worker → UI signals
  self.worker.portConnected.connect(self.on_port_connected)
  self.worker.portDisconnected.connect(self.on_port_disconnected)
  self.worker.dataReceived.connect(self.display_message)
  self.worker.statusChanged.connect(self.status_label.setText)

  # UI → Worker signals
  self.connect_button.clicked.connect(self.on_connect_clicked)
  self.disconnect_button.clicked.connect(self.worker.disconnectPort)
  self.send_button.clicked.connect(self.on_send_clicked)
  ```
- Implement UI slot handlers:
  - `on_port_connected()`: enable Disconnect/Send, disable Connect
  - `on_port_disconnected()`: enable Connect, disable Disconnect/Send
  - `on_connect_clicked()`: gather port settings, call worker.connectPort()
  - `on_send_clicked()`: get text from input field, call worker.sendData()

**Key considerations:**
- Qt automatically handles thread safety for signal/slot connections
- Worker signals (emitted in worker thread) are queued to main thread
- UI controls must only be modified in main thread (via slots)
- Button enable/disable logic prevents invalid state transitions
- Display handler should be efficient (avoid blocking main thread)

**Code locations/files affected:**
- `uart_widget.py` - UARTWidget class, __init__() or setup_connections() method
- `uart_widget.py` - UI slot handler methods

## Dependencies
- [ ] Task 10 completed (port selection dropdown)
- [ ] Task 13 completed (Connect/Disconnect buttons)
- [ ] Task 14 completed (RX text display)
- [ ] Task 15 completed (TX input and Send button)
- [ ] Task 18 completed (SerialWorker.connectPort())
- [ ] Task 19 completed (SerialWorker.read_loop())
- [ ] Task 20 completed (SerialWorker.sendData())

## Effort Estimate
- Size: M
- Hours: 2 hours
- Parallel: false (depends on multiple prior tasks)

## Definition of Done
- [ ] Code implemented
- [ ] All signal/slot connections established
- [ ] UI updates correctly on worker signals
- [ ] Worker methods invoked correctly from UI
- [ ] No threading errors or crashes
- [ ] UI remains responsive during serial I/O
