---
name: Create ping_pong.ino example sketch
status: open
created: 2025-12-24T03:41:21Z
updated: 2025-12-24T03:41:21Z
github: https://github.com/junyoulin641/CCPM/issues/31
depends_on: [12]
parallel: true
conflicts_with: []
---

# Task: Create ping_pong.ino example sketch

## Description
Create an Arduino sketch that responds to the command "PING" with the response "PONG". This implements a simple command-response protocol for testing UARTWidget's ability to send commands and receive specific responses. This verifies parsing, command handling, and interactive communication patterns.

## Acceptance Criteria
- [ ] File `ping_pong.ino` created in examples/arduino/ directory
- [ ] Sketch initializes Serial at 115200 baud
- [ ] Sketch parses incoming text for "PING" command
- [ ] Sketch responds with "PONG" when "PING" received
- [ ] Sketch handles line endings (CR/LF) correctly
- [ ] Sketch includes comments explaining protocol
- [ ] Sketch compiles without errors for Arduino Uno/Nano
- [ ] Sketch tested on actual Arduino hardware

## Technical Details
**Implementation approach:**
```cpp
// ping_pong.ino - Respond to PING with PONG

String inputString = "";
boolean stringComplete = false;

void setup() {
  Serial.begin(115200);
  while (!Serial) {
    ;
  }
  inputString.reserve(200);
}

void loop() {
  while (Serial.available()) {
    char inChar = (char)Serial.read();
    if (inChar == '\n' || inChar == '\r') {
      stringComplete = true;
    } else {
      inputString += inChar;
    }
  }

  if (stringComplete) {
    if (inputString.indexOf("PING") >= 0) {
      Serial.println("PONG");
    }
    inputString = "";
    stringComplete = false;
  }
}
```

**Key considerations:**
- Handle various line ending styles (LF, CR, CRLF)
- Case-sensitive or case-insensitive matching (document choice)
- Prevent buffer overflow with String.reserve()
- Support multiple commands in future (extensible design)

**Code locations/files affected:**
- New file: `simple-python-ui/examples/arduino/ping_pong.ino`

## Dependencies
- [ ] Task 12: Define physical test hardware requirements complete

## Effort Estimate
- Size: XS
- Hours: 0.5 hours
- Parallel: true (can run independently)

## Definition of Done
- [ ] Sketch file created
- [ ] Code compiles successfully
- [ ] Uploaded to Arduino hardware
- [ ] Command-response verified (send "PING\n" â†’ receive "PONG\n")
- [ ] Handles line endings correctly
- [ ] Documented in examples README
