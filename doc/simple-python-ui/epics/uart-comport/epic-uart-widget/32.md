---
name: Create stream_logger.ino example sketch
status: open
created: 2025-12-24T03:41:21Z
updated: 2025-12-24T03:41:21Z
github: https://github.com/junyoulin641/CCPM/issues/32
depends_on: [12]
parallel: true
conflicts_with: []
---

# Task: Create stream_logger.ino example sketch

## Description
Create an Arduino sketch that continuously outputs periodic log messages over UART. The sketch generates timestamped messages every 100ms, simulating a data logging or sensor monitoring scenario. This is used to test the UARTWidget's ability to handle continuous data streams, verify display scrolling, and stress-test the receive buffer.

## Acceptance Criteria
- [ ] File `stream_logger.ino` created in examples/arduino/ directory
- [ ] Sketch initializes Serial at 115200 baud
- [ ] Sketch outputs messages every 100ms using millis() for timing
- [ ] Messages include incrementing counter and timestamp
- [ ] Message format is consistent and parseable
- [ ] Sketch includes comments explaining output format
- [ ] Sketch compiles without errors for Arduino Uno/Nano
- [ ] Sketch tested on actual Arduino hardware

## Technical Details
**Implementation approach:**
```cpp
// stream_logger.ino - Continuous data stream logger

unsigned long previousMillis = 0;
unsigned long counter = 0;
const long interval = 100;  // 100ms between messages

void setup() {
  Serial.begin(115200);
  while (!Serial) {
    ;
  }
  Serial.println("Stream logger started");
}

void loop() {
  unsigned long currentMillis = millis();

  if (currentMillis - previousMillis >= interval) {
    previousMillis = currentMillis;

    // Output format: [timestamp_ms] Counter: <count>
    Serial.print("[");
    Serial.print(currentMillis);
    Serial.print("] Counter: ");
    Serial.println(counter);

    counter++;
  }
}
```

**Key considerations:**
- Use millis() for non-blocking timing (no delay())
- Output format should be easy to parse and verify
- Include clear start message
- Counter allows verification of message loss
- 100ms interval = 10 messages/second (good for testing)

**Code locations/files affected:**
- New file: `simple-python-ui/examples/arduino/stream_logger.ino`

## Dependencies
- [ ] Task 12: Define physical test hardware requirements complete

## Effort Estimate
- Size: XS
- Hours: 0.5 hours
- Parallel: true (can run independently)

## Definition of Done
- [ ] Sketch file created
- [ ] Code compiles successfully
- [ ] Uploaded to Arduino hardware
- [ ] Continuous output verified (10 messages/second)
- [ ] Message format consistent
- [ ] Counter increments correctly
- [ ] Documented in examples README
