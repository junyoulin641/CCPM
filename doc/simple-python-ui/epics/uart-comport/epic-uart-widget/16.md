---
name: Implement status indicator with color states
status: open
created: 2025-12-24T03:41:21Z
updated: 2025-12-24T07:56:24Z
github: https://github.com/junyoulin641/CCPM/issues/16
depends_on: [13]
parallel: false
conflicts_with: []
---

# Task: Implement status indicator with color states

## Description
Enhance the status label (from task 005) with color-coded visual states to provide immediate feedback about the serial port connection status. Implement a helper method to update both text and color based on connection state.

## Acceptance Criteria
- [ ] `updateStatus(state)` method implemented
- [ ] Color coding implemented: Connected=green, Disconnected=gray, Error=red
- [ ] Status text updates with state changes
- [ ] Colors are clearly visible and accessible
- [ ] Method accepts state parameter (string or enum)
- [ ] Status label updates in real-time when called

## Technical Details
**Implementation approach:**
- Add `updateStatus(state: str)` method to UARTWidget
- Use QLabel stylesheet for color changes: `setStyleSheet("color: green;")`
- Define state constants or enum for status types
- Map states to colors:
  - "connected" → green (#00AA00)
  - "disconnected" → gray (#808080)
  - "error" → red (#CC0000)
- Update text and color atomically

**Key considerations:**
- Use clear, high-contrast colors for accessibility
- Consider background color if needed for visibility
- State parameter should be case-insensitive or use constants
- Future enhancement: add icon indicators alongside color
- Thread-safe updates if called from SerialWorker thread

**Code locations/files affected:**
- Modify: `uart_widget.py` (add updateStatus method)
- Update: UARTWidget class (status label reference from task 005)

**Example implementation:**
```python
def updateStatus(self, state: str):
    state = state.lower()
    if state == "connected":
        self.status_label.setText("Status: Connected")
        self.status_label.setStyleSheet("color: #00AA00; font-weight: bold;")
    elif state == "disconnected":
        self.status_label.setText("Status: Disconnected")
        self.status_label.setStyleSheet("color: #808080;")
    elif state == "error":
        self.status_label.setText("Status: Error")
        self.status_label.setStyleSheet("color: #CC0000; font-weight: bold;")
```

## Dependencies
- [ ] Task 005 completed (status label exists in control panel)
- [ ] PyQt6.QtWidgets available (QLabel stylesheet support)

## Effort Estimate
- Size: XS
- Hours: 0.5 hours
- Parallel: false (depends on task 005 completion)

## Definition of Done
- [ ] Code implemented
- [ ] Method accepts state parameter
- [ ] All three states (connected/disconnected/error) display correct colors
- [ ] Colors are clearly distinguishable
- [ ] Status text updates match state
- [ ] No rendering glitches or color flickering
