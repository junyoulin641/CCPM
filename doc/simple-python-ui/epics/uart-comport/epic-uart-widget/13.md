---
name: Implement connection controls panel
status: open
created: 2025-12-24T03:41:21Z
updated: 2025-12-24T07:56:24Z
github: https://github.com/junyoulin641/CCPM/issues/13
depends_on: [9]
parallel: false
conflicts_with: [14, 15]
---

# Task: Implement connection controls panel (UI)

## Description
Create the top panel of the UART widget containing COM port selection, baud rate selection, connect/disconnect buttons, refresh button, and connection status indicator. This is the primary control interface for managing serial port connections.

## Acceptance Criteria
- [ ] QComboBox for port selection (initially empty, will populate in port discovery task)
- [ ] QComboBox for baud rate selection with presets (9600, 19200, 38400, 57600, 115200)
- [ ] QPushButton for Connect/Disconnect (text changes based on state)
- [ ] QPushButton for Refresh ports
- [ ] QLabel for connection status (text + color indicator: green/gray/red)
- [ ] All widgets arranged in horizontal layout (QHBoxLayout)
- [ ] Panel added to UARTWidget main layout (top position)

## Technical Details
**Implementation approach:**
```python
# In UARTWidget.__init__()
control_layout = QHBoxLayout()

self.port_combo = QComboBox()
self.port_combo.addItem("No ports detected")

self.baud_combo = QComboBox()
self.baud_combo.addItems(["9600", "19200", "38400", "57600", "115200"])
self.baud_combo.setCurrentText("115200")  # Default

self.connect_btn = QPushButton("Connect")
self.refresh_btn = QPushButton("Refresh")

self.status_label = QLabel("Disconnected")
self.status_label.setStyleSheet("color: gray")

control_layout.addWidget(QLabel("Port:"))
control_layout.addWidget(self.port_combo)
control_layout.addWidget(QLabel("Baud:"))
control_layout.addWidget(self.baud_combo)
control_layout.addWidget(self.connect_btn)
control_layout.addWidget(self.refresh_btn)
control_layout.addWidget(self.status_label)

main_layout.addLayout(control_layout)
```

**Key considerations:**
- Connect button starts as "Connect", changes to "Disconnect" when active
- Status label uses color coding: gray (Disconnected), green (Connected), red (Error)
- Baud combo default to 115200 (most common for Arduino/ESP32)
- Leave button connections (clicked signals) for later task

**Code locations/files affected:**
- `uart_widget.py`: UARTWidget.__init__()

## Dependencies
- [ ] Task 001 completed (UARTWidget class exists)

## Effort Estimate
- Size: S
- Hours: 1.5 hours
- Parallel: false (depends on 001, conflicts with other UI tasks)

## Definition of Done
- [ ] Code implemented
- [ ] UI renders correctly
- [ ] Widgets accessible as instance variables
- [ ] Layout matches design (horizontal controls panel)
- [ ] Visual appearance clean and functional
