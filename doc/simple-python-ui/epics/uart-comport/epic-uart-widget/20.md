---
name: Implement SerialWorker.sendData() for TX operations
status: open
created: 2025-12-24T03:41:21Z
updated: 2025-12-24T03:41:21Z
github: https://github.com/junyoulin641/CCPM/issues/20
depends_on: [18]
parallel: false
conflicts_with: []
---

# Task: Implement SerialWorker.sendData() for TX operations

## Description
Implement the sendData() slot in the SerialWorker class to handle transmit (TX) operations. This method receives data from the UI thread, encodes it as UTF-8, optionally appends line endings, writes to the serial port, and handles write errors. This completes the bidirectional communication capability of the UART widget.

## Acceptance Criteria
- [ ] `sendData(data: str)` slot implemented with `@pyqtSlot(str)` decorator
- [ ] Accepts string data from main UI thread
- [ ] Encodes data as UTF-8 bytes
- [ ] Appends newline character ('\n') to transmitted data
- [ ] Writes encoded data to serial port using `write()`
- [ ] Handles write errors gracefully (port closed, write timeout)
- [ ] Emits status signal on error conditions
- [ ] Does not block main UI thread

## Technical Details
**Implementation approach:**
- Add `@pyqtSlot(str)` decorated method to SerialWorker:
  ```python
  @pyqtSlot(str)
  def sendData(self, data: str):
      if self.serial_port and self.serial_port.is_open:
          try:
              encoded = (data + '\n').encode('utf-8')
              self.serial_port.write(encoded)
          except SerialException as e:
              self.statusChanged.emit(f"Write error: {str(e)}")
  ```
- Append '\n' to ensure proper line termination for most UART devices
- Catch write exceptions and report via status signal

**Key considerations:**
- Line ending: append '\n' (LF) by default (common UART convention)
- Encoding: UTF-8 standard, handles ASCII and extended characters
- Error handling: don't crash on write failures, inform user via status
- Thread safety: runs in worker thread, safe to access serial port directly
- No echo confirmation: assumes write success unless exception occurs

**Code locations/files affected:**
- `uart_widget.py` - SerialWorker class, sendData() method

## Dependencies
- [ ] Task 18 completed (SerialWorker.connectPort() implemented)
- [ ] pyserial library installed
- [ ] SerialWorker signals defined (statusChanged)

## Effort Estimate
- Size: S
- Hours: 1 hour
- Parallel: false (depends on task 18)

## Definition of Done
- [ ] Code implemented
- [ ] sendData() accepts string and writes to serial port
- [ ] Data correctly encoded as UTF-8 with line ending
- [ ] Write errors handled gracefully
- [ ] No blocking of UI thread
